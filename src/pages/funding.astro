---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Nominate OSS for Funding — Open Source Endowment" description="Nominate critical, underfunded open source projects for OSE grant funding through our open, community-developed model.">
    <article>
        <!-- Hero (same structure as Docs page) -->
        <section class="pagesec pagesec--dark pagesec--tight">
            <div class="container">
                <div class="insec insec--xpad insec--ytight">
                    <div class="squares squares--corner-dark-sw-outer"></div>
                    <div class="squares squares--corner-dark-sw-inner"></div>
                    <div class="squares squares--corner-dark-ne-outer"></div>
                    <div class="squares squares--corner-dark-ne-inner"></div>
                    <div class="sechead sechead--min-height flex-center flex-column">
                        <h1>Nominate OSS for Funding</h1>
                        <p>
                            Know a critical open source project that deserves support?
                            Help us identify projects our model might not yet surface.
                            Nominations will be considered in the model for this round.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nomination Form + Sidebar -->
        <section class="pagesec">
            <div class="container">
                <div class="insec insec--xpad">
                    <div class="nominate-layout">
                        <div class="nominate-sidebar">
                            <div class="sidebar-card">
                                <h3>Eligibility</h3>
                                <p>
                                    Only independent free and open source software is eligible — no corporate or VC-funded projects.
                                    See our <a href="/faq">FAQ</a> for details.
                                </p>
                            </div>

                            <div class="sidebar-card">
                                <h3>Community Input</h3>
                                <p>
                                    Projects are selected through the
                                    <a href="https://github.com/osendowment/model" target="_blank">model</a>,
                                    co-developed with the
                                    <a href="/endowment#governance">Members</a>.
                                    Your nominations are valuable input for this model,
                                    and self-nominations are welcome!
                                </p>
                            </div>

                            <div class="sidebar-card">
                                <h3>Funding Format</h3>
                                <p>
                                    OSE aims to provide ~$5,000 microgrants to the most valuable OSS
                                    that is at high risk due to underfunding. We will contact the potential
                                    grantees in Q2 2026.
                                </p>
                            </div>

                        </div>
                        <div class="nominate-main">
                            <div id="surveyjs-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Selection Process -->
        <section class="pagesec">
            <div class="container">
                <div class="insec insec--xpad">
                    <h2 class="sechead sechead--left">Selection Process</h2>
                    <div class="process-flow">
                        <!-- Parallel steps 1 & 2 -->
                        <div class="process-parallel">
                            <div class="process-card">
                                <span class="process-num">1</span>
                                <strong>Community Nominations</strong>
                                <p>Community nominations are accepted</p>
                            </div>
                            <div class="process-card">
                                <span class="process-num">2</span>
                                <strong>Model Finalization</strong>
                                <p>OSE Members and community finalize the grantmaking model</p>
                            </div>
                        </div>
                        <!-- Arrow -->
                        <div class="process-arrow">›</div>
                        <!-- Step 3 -->
                        <div class="process-card">
                            <span class="process-num">3</span>
                            <strong>Selection</strong>
                            <p>Data-driven model highlights potential grantees; OSE team contacts top candidates and performs due diligence</p>
                        </div>
                        <!-- Arrow -->
                        <div class="process-arrow">›</div>
                        <!-- Step 4 -->
                        <div class="process-card">
                            <span class="process-num">4</span>
                            <strong>Board Approval</strong>
                            <p>Board reviews DD results and approves grant distribution</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </article>
</Layout>

<style>
    /* Two-column layout */
    .nominate-layout {
        display: flex;
        gap: 4rem;
        align-items: flex-start;
        @media (max-width: 900px) {
            flex-direction: column;
            gap: 3rem;
        }
    }
    .nominate-main {
        flex: 2;
        padding: 2rem;
        background: white;
        border: 1px solid var(--color-primary-fade1);
        h2.sechead {
            padding-top: 0;
            margin-bottom: 0.5rem;
        }
    }
    .nominate-sidebar {
        flex: 1;
    }

    /* Sidebar cards */
    .sidebar-card {
        padding: 1.5rem 0;
        h3 {
            margin: 0 0 0.5rem;
            font-size: var(--font-size-2);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            opacity: 0.5;
        }
        p {
            margin: 0;
            font-size: var(--font-size-3);
            line-height: 1.6;
            color: var(--color-text-dark-secondary);
        }
        & + .sidebar-card {
            border-top: 1px solid var(--color-section-border);
        }
    }

    /* Selection Process */
    .process-flow {
        display: flex;
        align-items: stretch;
        gap: 0;
        @media (max-width: 900px) {
            flex-direction: column;
            align-items: stretch;
        }
    }
    .process-parallel {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        .process-card {
            flex: 1;
        }
    }
    .process-card {
        padding: 1.5rem;
        border: 1px solid var(--color-section-border);
        .process-num {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 1.6rem;
            height: 1.6rem;
            margin-bottom: 0.6rem;
            background: var(--color-primary-fade2);
            border: 1px solid var(--color-primary-border);
            border-radius: 50%;
            font-weight: 600;
            font-size: var(--font-size-2);
            color: var(--color-primary-text);
        }
        strong {
            display: block;
            margin-bottom: 0.3rem;
            font-size: var(--font-size-3);
            font-weight: 600;
        }
        p {
            margin: 0;
            font-size: var(--font-size-2);
            line-height: 1.5;
            color: var(--color-text-dark-secondary);
        }
    }
    .process-arrow {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 0.6rem;
        color: var(--color-primary);
        font-size: 1.4rem;
        font-weight: 300;
        opacity: 0.7;
        @media (max-width: 900px) {
            padding: 0.4rem 0;
            transform: rotate(90deg);
        }
    }

    /* Survey.js container */
    #surveyjs-container {
        max-width: 42rem;
    }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/survey-core/survey-core.min.css" />
<script is:inline src="https://cdn.jsdelivr.net/npm/survey-core/survey.core.min.js"></script>
<script is:inline src="https://cdn.jsdelivr.net/npm/survey-js-ui/survey-js-ui.min.js"></script>
<script is:inline>
    const surveyJson = {
        "pages": [
            {
                "name": "Nominate an OSS project",
                "elements": [
                    {
                        "type": "text",
                        "name": "name",
                        "title": "Your name",
                        "isRequired": true
                    },
                    {
                        "type": "text",
                        "name": "email",
                        "title": "Your email",
                        "isRequired": true,
                        "inputType": "email",
                        "autocomplete": "email",
                        "validators": [
                            {
                                "type": "email"
                            }
                        ]
                    },
                    {
                        "type": "text",
                        "name": "project_url",
                        "title": "GitHub Repo URL of a nominated project",
                        "isRequired": true,
                        "validators": [
                            {
                                "type": "regex",
                                "text": "Please enter a valid GitHub repository URL (https://github.com/user/repo)",
                                "regex": "^https?:\\/\\/github\\.com\\/[a-zA-Z0-9_.-]+\\/[a-zA-Z0-9_.-]+\\/?$"
                            }
                        ],
                        "placeholder": "https://github.com/{user}/{repo}"
                    },
                    {
                        "type": "comment",
                        "name": "comment",
                        "title": "Comments",
                        "placeholder": "Why do you think this OSS is valuable but underfunded? Please briefly explain why you nominate this project"
                    }
                ]
            }
        ],
        "showTitle": false,
        "completeText": "Nominate OSS project for funding"
    };

    document.addEventListener("DOMContentLoaded", function () {
        const survey = new Survey.Model(surveyJson);

        survey.applyTheme({
            "cssVariables": {
                "--sjs-primary-backcolor": "#5ba9ee",
                "--sjs-primary-backcolor-light": "rgba(91,169,238,0.1)",
                "--sjs-primary-backcolor-dark": "#005fa7",
                "--sjs-primary-forecolor": "#fff",
                "--sjs-general-backcolor": "transparent",
                "--sjs-general-backcolor-dim": "transparent",
                "--sjs-general-forecolor": "#3a3e43",
                "--sjs-general-forecolor-light": "rgba(58,62,67,0.55)",
                "--sjs-border-default": "#e0e0e0",
                "--sjs-border-light": "#e0e0e0",
                "--sjs-font-family": "inherit",
                "--sjs-corner-radius": "4px",
                "--sjs-base-unit": "8px",
                "--sjs-shadow-small": "none",
                "--sjs-shadow-inner": "none"
            },
            "isPanelless": true
        });

        survey.onComplete.add(function (sender) {
            console.log("Survey results:", JSON.stringify(sender.data, null, 2));
        });

        survey.render(document.getElementById("surveyjs-container"));
    });
</script>
